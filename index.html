<!DOCTYPE html>

<html lang="zh-TW">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>我思舒心字卡 - 內在智慧的指引</title>
<link href="favicon.ico" rel="icon" type="image/x-icon"/>
<link href="LOGO.jpg" rel="icon" type="image/jpeg"/>
<link href="LOGO.jpg" rel="apple-touch-icon"/>
<script src="https://cdn.tailwindcss.com"></script>
<style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: url('BG.JPG') no-repeat center center fixed;
            background-size: cover;
            background-attachment: fixed;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .bg-overlay {
            position: fixed;
            inset: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
        }

        .logo-header {
            position: relative;
            padding:1rem;
            text-align:center;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items:center;
        }

        .logo-header img {
            width: 96px;
            height: 96px;
            border-radius: 24px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.30);
            background: #f5f3f0;
            border: 2px solid #c9a96e;
        }

        .logo-title {
            position: absolute;
            top: 32px;
            right: 32px;
            font-size: 1.25rem;
            font-weight: 700;
            color: #f5f3f0;
            letter-spacing: 0.1em;
            background: rgba(201, 169, 110, 0.9);
            border-radius: 8px;
            padding: 4px 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.30);
            border: 1px solid #c9a96e;
            z-index: 10;
        }

        .card-flip {
            perspective: 1000px;
            width: 100%;
            height: 420px;
            max-width: 280px;
            margin: 0 auto;
            position: relative;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .card-flip.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            top: 0;
            left: 0;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
            box-sizing: border-box;
        }

        .card-front {
            background: url('card_BG2.png') no-repeat center center, url('CardBG.jpg') no-repeat center center;
            background-size: 100% 100%, cover;
            box-shadow: 0 8px 25px rgba(107, 91, 115, 0.50);
            border: 2px solid #c9a96e;
        }

        .card-back {
            background: url('card_BG2.png') no-repeat center center, linear-gradient(135deg, #f5f3f0 0%, #e8d5c4 100%);
            background-size: 100% 100%, cover;
            color: #2c2838;
            transform: rotateY(180deg);
            box-shadow: 0 8px 25px rgba(107, 91, 115, 0.50);
            border: 2px solid #c9a96e;
        }

        .healing-text {
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.30);
            color: #2c2838;
        }

        .card-front h3,
        .card-back h3 {
            text-shadow: 0 2px 4px rgba(107, 91, 115, 0.30);
            color: #2c2838;
        }

        .card-front p,
        .card-back p {
            text-shadow: 0 1px 3px rgba(107, 91, 115, 0.20);
            color: #2c2838;
        }

        .card-flip:hover .card-inner {
            transform: translateY(-4px);
        }

        .card-flip.flipped:hover .card-inner {
            transform: translateY(-4px) rotateY(180deg);
        }

        .card-flip:hover .card-front,
        .card-flip:hover .card-back {
            box-shadow: 0 25px 50px rgba(107, 91, 115, 0.60), 0 10px 25px rgba(107, 91, 115, 0.40);
        }

        .gradient-bg {
            background: linear-gradient(135deg, #2c2838 0%, #6b5b73 100%);
        }

        .position-label {
            position: absolute;
            top: 8px;
            left: 8px;
            background: rgba(245, 243, 240, 0.95);
            color: #2c2838;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 20;
            backdrop-filter: blur(4px);
            box-shadow: 0 2px 8px rgba(107, 91, 115, 0.30);
            border: 1px solid #c9a96e;
        }

        .card-back .position-label {
            background: rgba(245, 243, 240, 0.90);
            color: #2c2838;
        }

        .card-content {
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .icon-container {
            width: 80px;
            height: 80px;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .icon-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(107, 91, 115, 0.40);
            filter: drop-shadow(0 2px 4px rgba(107, 91, 115, 0.30));
        }

        .emoji {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 2px 8px rgba(107, 91, 115, 0.40);
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.30));
        }

        @media (max-width: 768px) {
            .card-flip {
                height: 380px;
                max-width: 260px;
            }

            .icon-container {
                width: 60px;
                height: 60px;
                margin-bottom: 1rem;
            }

            .emoji {
                font-size: 2.5rem;
            }
        }

        .btn-milktea {
            background: linear-gradient(135deg, #c9a96e 0%, #e8d5c4 100%);
            color: #2c2838;
            border-radius: 12px;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            transition: all 0.3s ease;
            border: 2px solid #c9a96e;
            box-shadow: 0 4px 12px rgba(107, 91, 115, 0.30);
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);
        }

        .btn-milktea:hover {
            background: linear-gradient(135deg, #e8d5c4 0%, #c9a96e 100%);
            color: #2c2838;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(107, 91, 115, 0.50);
            border-color: #e8d5c4;
        }

        .text-primary {
            color: #ffffff !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.50);
        }

        .text-secondary {
            color: #c9a96e !important;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.30);
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
        }

        .healing-text {
            color: #2c2838 !important;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.30);
        }

        .drop-shadow {
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.50));
        }

        .control-panel {
            background: rgba(245, 243, 240, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid #c9a96e;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(107, 91, 115, 0.40);
        }

        .control-panel label {
            color: #2c2838;
            font-weight: 600;
        }

        .control-panel select {
            background: rgba(245, 243, 240, 0.95);
            color: #2c2838;
            border: 2px solid #c9a96e;
            border-radius: 8px;
            font-weight: 500;
        }

        .control-panel select:focus {
            outline: none;
            border-color: #e8d5c4;
            box-shadow: 0 0 0 3px rgba(201, 169, 110, 0.30);
        }

        .cards-section {
            background: rgba(245, 243, 240, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid #c9a96e;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(107, 91, 115, 0.40);
        }

        .cards-section h2, .cards-section h3, .cards-section p {
            color: #2c2838;
        }

        .reading-guide {
            background: rgba(201, 169, 110, 0.80);
            border: 1px solid #c9a96e;
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }

        .reading-guide h3, .reading-guide p, .reading-guide div {
            color: #2c2838;
        }

        .modal-content {
            background: #f5f3f0;
            border: 2px solid #c9a96e;
            color: #2c2838;
        }

        * {
            box-sizing: border-box;
        }

        button {
            border: none;
            outline: none;
        }

        button:focus {
            outline: none;
        }

        .btn-milktea {
            border: 2px solid #c9a96e;
        }

        .btn-milktea:focus {
            outline: none;
            border-color: #e8d5c4;
        }

        .footer {
            background: rgba(44, 40, 56, 0.95);
            backdrop-filter: blur(10px);
            border-top: 2px solid #c9a96e;
            color: #f5f3f0;
            padding: 2rem 0;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 6xl;
            margin: 0 auto;
            padding: 0 2rem;
        }

        @media (max-width: 768px) {
            .footer-content {
                padding: 0 1.5rem;
            }
        }

        @media (min-width: 1024px) {
            .footer-content {
                padding: 0 5rem;
            }
        }

        .footer-section {
            margin-bottom: 1.5rem;
        }

        .footer-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #c9a96e;
            margin-bottom: 0.75rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.30);
        }

        .footer-text {
            font-size: 0.9rem;
            line-height: 1.6;
            opacity: 0.9;
        }

        .footer-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #c9a96e, transparent);
            margin: 1.5rem 0;
        }

        .footer-bottom {
            text-align: center;
            font-size: 0.85rem;
            opacity: 0.8;
            margin-top: 1rem;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .footer-link {
            color: #e8d5c4;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-link:hover {
            color: #c9a96e;
        }

        .footer-certification {
            display: inline-block;
            background: rgba(201, 169, 110, 0.2);
            border: 1px solid #c9a96e;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            margin: 0.5rem 0.5rem 0.5rem 0;
            font-size: 0.8rem;
        }

        .header-certifications {
            position: absolute;
            top: 96px;
            right: 32px;
            z-index: 10;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            max-width: 280px;
            justify-content: flex-end;
        }

        .header-certification {
            display: inline-block;
            background: rgba(245, 243, 240, 0.195);
            backdrop-filter: blur(10px);
            border: 1px solid #c9a96e;
            border-radius: 12px;
            margin-top: 0.2rem;
            padding: 0.5rem;
            font-size: 0.7rem;
            font-weight: 600;
            color: #ffffff;
            text-shadow: none;
            box-shadow: 0 2px 8px rgba(107, 91, 115, 0.20);
            white-space: nowrap;
        }

        @media (max-width: 768px) {
            .header-certifications {
                position: absolute;
                top: 100px;
                right: 16px;
                left: 16px;
                z-index: 10;
                display: flex;
                flex-wrap: wrap;
                gap: 0.4rem;
                max-width: calc(100% - 32px);
                justify-content: flex-end;
            }
            
            .header-certification {
                font-size: 0.65rem;
                padding: 0.3rem 0.6rem;
            }
            
            .logo-title {
                margin-bottom: 0;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .header-certifications {
                top: 92px;
                right: 24px;
                max-width: 240px;
            }
            
            .header-certification {
                font-size: 0.68rem;
                padding: 0.35rem 0.7rem;
            }
        }

        /* 新增：快速指引區域樣式 */
        .quick-guide {
            background: rgba(201, 169, 110, 0.15);
            border: 1px solid rgba(201, 169, 110, 0.30);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .quick-guide-item {
            background: rgba(245, 243, 240, 0.85);
            border-left: 4px solid #c9a96e;
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }

        .quick-guide-item:hover {
            background: rgba(245, 243, 240, 0.95);
            transform: translateX(2px);
        }

        .expand-button {
            background: linear-gradient(135deg, #c9a96e 0%, #e8d5c4 100%);
            color: #2c2838;
            border-radius: 8px;
            font-weight: 600;
            padding: 0.5rem 1rem;
            transition: all 0.3s ease;
            border: 1px solid #c9a96e;
            box-shadow: 0 2px 8px rgba(107, 91, 115, 0.30);
            font-size: 0.9rem;
        }

        .expand-button:hover {
            background: linear-gradient(135deg, #e8d5c4 0%, #c9a96e 100%);
            transform: translateY(-1px);
        }

        .usage-tips {
            background: rgba(201, 169, 110, 0.10);
            border: 1px dashed rgba(201, 169, 110, 0.40);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            display: none;
        }

        .tip-category {
            background: rgba(245, 243, 240, 0.80);
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
        }
    

/* 手機裝置優化樣式 */
@media (max-width: 768px) {
  .card-container, .cards-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0 1rem;
  }

  .card {
    width: 100% !important;
    max-width: 100%;
    margin: 1rem 0;
    font-size: 1rem;
    transform: none !important;
  }

  .card .text-content, .card .back, .card .front {
    overflow-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    max-width: 100%;
    text-align: left;
  }

  body {
    overflow-x: hidden;
  }
}

/* 修正 iPhone 上文字鏡像或亂碼 */
.card {
  transform: none !important;
}
</style>
</head>
<body class="min-h-screen gradient-bg">
<div class="bg-overlay"></div>
<div class="logo-header">
    <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
        <img alt="LOGO" src="LOGO.jpg" style="width: 60px; height: 60px; margin-right: 1rem; border-radius: 12px; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.30); background: #f5f3f0; border: 2px solid #c9a96e;"/>
        <div style="font-size: 1.25rem; font-weight: 700; color: #f5f3f0; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.50);">🔮 袖艷靈性指引工作室</div>
    </div>
    <div style="display: flex; justify-content: center; gap: 0.5rem; flex-wrap: wrap;">
        <span class="header-certification">🔮 專業認證</span>
        <span class="header-certification">✨ 靈性導師</span>
    </div>
<div class="container mx-auto px-4 py-8">
<!-- 標題區域 -->
<header class="text-center mb-12">
<h1 class="text-3xl md:text-5xl font-bold text-white mb-4 drop-shadow-lg">
                🔮 我思舒心字卡
            </h1>
<p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto leading-relaxed" style="color: #93759e;">
                每一張卡片都是一面鏡子，映照出你內在的智慧與力量。<br/>
                讓直覺引導你，找到此刻最需要的訊息。
            </p>
</header>
<!-- 使用指引 -->
<div class="max-w-4xl mx-auto mb-8">
<div class="control-panel p-6">
<h2 class="text-xl font-bold text-center mb-4" style="color: #2c2838;">💫 使用指引</h2>
<div class="grid md:grid-cols-3 gap-6">
<div class="text-center">
<div class="text-3xl mb-3">🧘‍♀️</div>
<h3 class="font-medium mb-2" style="color: #2c2838;">靜心準備</h3>
<p class="text-sm" style="color: #2c2838;">找個安靜的地方，<br/>深呼吸三次，讓心靈平靜下來。</p>
</div>
<div class="text-center">
<div class="text-3xl mb-3">❓</div>
<h3 class="font-medium mb-2" style="color: #2c2838;">帶著問題</h3>
<p class="text-sm" style="color: #2c2838;">在心中想著你想要<br/>探索的問題或生活狀況。</p>
</div>
<div class="text-center">
<div class="text-3xl mb-3">💝</div>
<h3 class="font-medium mb-2" style="color: #2c2838;">開放接收</h3>
<p class="text-sm" style="color: #2c2838;">以開放的心接收卡片訊息，<br/>相信內在的智慧。</p>
</div>
</div>
</div>
</div>
<!-- 控制面板 -->
<div class="max-w-4xl mx-auto mb-8">
<div class="control-panel p-6">
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<!-- 抽卡模式選擇 -->
<div>
<label class="block font-medium mb-2">🔮 抽卡模式</label>
<select class="w-full" id="drawModeSelect" style="padding: 0.75rem 1.5rem; border-radius: 12px; font-weight: 600; background: rgba(245, 243, 240, 0.95); color: #2c2838; border: 2px solid #c9a96e; box-sizing: border-box;">
<option value="single">單張指引 🎴</option>
<option value="three">三張展開 🎴🎴🎴</option>
<option value="five">五向深探 🎴🎴🎴🎴🎴</option>
</select>
</div>
<!-- 抽卡控制 -->
<div>
<label class="block font-medium mb-2">　　　　</label>
<div class="space-y-2">
<button class="btn-milktea w-full" onclick="drawCards()">🔮 開始抽卡</button>
</div>
</div>
</div>
<!-- 快速使用方式提示 -->
<div class="text-center mt-4">
<button class="expand-button" id="usageTipsBtn" onclick="toggleUsageTips()">
                        📚 查看使用方式與日常實踐
                    </button>
</div>
<!-- 使用方式詳細說明 -->
<div class="usage-tips" id="usageTips">
<div class="grid md:grid-cols-2 gap-4">
<div class="tip-category">
<h4 class="font-semibold mb-2 text-lg" style="color: #2c2838;">🌅 每日實踐</h4>
<div class="text-sm space-y-1" style="color: #2c2838;">
<p><strong>晨間指引：</strong>抽一張卡片作為當天的靈性主題</p>
<p><strong>晚間回顧：</strong>回顧當天如何體現了卡片的訊息</p>
<p><strong>困難時刻：</strong>遇到挑戰時抽卡尋求指引</p>
</div>
</div>
<div class="tip-category">
<h4 class="font-semibold mb-2 text-lg" style="color: #2c2838;">🌙 週期實踐</h4>
<div class="text-sm space-y-1" style="color: #2c2838;">
<p><strong>週日規劃：</strong>用三張展開為新的一週設定意圖</p>
<p><strong>新月意圖：</strong>在新月時用五向深探設定月度意圖</p>
<p><strong>滿月釋放：</strong>在滿月時回顧並釋放不再需要的模式</p>
</div>
</div>
<div class="tip-category">
<h4 class="font-semibold mb-2 text-lg" style="color: #2c2838;">💫 特殊用途</h4>
<div class="text-sm space-y-1" style="color: #2c2838;">
<p><strong>重大決策：</strong>為重要選擇尋求靈性指引</p>
<p><strong>關係困擾：</strong>探索人際關係的深層課題</p>
<p><strong>自我探索：</strong>深入了解內在的信念和模式</p>
</div>
</div>
<div class="tip-category">
<h4 class="font-semibold mb-2 text-lg" style="color: #2c2838;">📝 整合建議</h4>
<div class="text-sm space-y-1" style="color: #2c2838;">
<p><strong>記錄感受：</strong>將重要洞察記錄在日記中</p>
<p><strong>分享交流：</strong>與信任的朋友分享領悟</p>
<p><strong>行動實踐：</strong>將指引轉化為具體的生活行動</p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- 抽取的卡片展示區域 -->
<div class="max-w-6xl mx-auto mb-8 hidden" id="drawnCardsSection">
<div class="cards-section p-6">
<div class="flex justify-between items-center mb-6">
<h2 class="text-2xl font-bold">✨ 你的卡片</h2>
<div class="space-x-2">
<button class="btn-milktea" onclick="flipAllCards()">🔮 翻轉卡片</button>
<button class="btn-milktea" onclick="resetDraw()">🔄 重新開始</button>
</div>
</div>
<!-- 抽取的卡片容器 -->
<div class="grid gap-6" id="drawnCardsContainer">
<!-- 抽取的卡片將顯示在這裡 -->
</div>
<br/><br/><br/>
<!-- 卡片解讀指引 -->
<div class="control-panel rounded-xl p-6 mb-8" id="readingGuide">
<h3 class="font-medium mb-3 text-lg" style="color: #2c2838;">🔮 解讀指引</h3>
<div class="text-sm" id="guideText" style="color: #2c2838;"></div>
<!-- 快速解讀指引（總是顯示） -->
<div class="quick-guide" id="quickReadingGuide">
<!-- 快速指引內容將在這裡動態生成 -->
</div>
<!-- 展開詳細指引 -->
<div class="text-center mt-4">
<button class="expand-button" id="detailedGuideBtn" onclick="toggleDetailedGuide()">
                            ✨ 展開深度解讀指引
                        </button>
</div>
<!-- 詳細指引內容 -->
<div class="usage-tips" id="detailedGuide">
<!-- 詳細指引內容將在這裡動態生成 -->
</div>
</div>
</div>
</div>
<!-- 單張卡片模態框 -->
<div class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50" id="cardModal" onclick="closeModal()">
<div class="modal-content rounded-2xl p-8 max-w-md mx-4 relative" onclick="event.stopPropagation()">
<button class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl" onclick="closeModal()">×</button>
<div id="modalContent"></div>
</div>
</div>
</div>
<!-- 聯絡表單區域 -->
<section class="max-w-4xl mx-auto mb-8">
<div class="control-panel p-6">
<div class="max-w-2xl mx-auto text-center">
<h2 class="text-2xl font-bold mb-4" style="color: #2c2838;">📝 我思字卡使用回饋</h2>
<p class="text-base mb-6" style="color: #6b5b73;">
                    感謝您使用我思舒心字卡！您的回饋將幫助我們持續改進，<br/>
                    請點擊下方按鈕填寫使用體驗問卷。
                </p>
<a class="btn-milktea inline-block px-8 py-3 text-lg" href="https://docs.google.com/forms/d/e/1FAIpQLSdQqTjBb0NX9CUed4WYCXXA0kIdzfmvBM5xbr0yw3irFhoAhA/viewform" target="_blank">
                    💫 填寫回饋表單
                </a>
<p class="text-sm mt-4" style="color: #6b5b73;">
                    回覆時間約 5～7 分鐘。
                </p>
</div>
</div>
</section>
<script>
        // 卡片資料庫
        const cardDatabase = [
            // 困境覺察類（20組）
            { id: 1, category: 'awareness', difficulty: 'beginner', front: '迷霧中的禮物', back: '當你看不清前路時，停下來問問自己：這片迷霧想讓我看見什麼？也許答案就在你願意停下來的那一刻。', emoji: '🌫️' },
            { id: 2, category: 'awareness', difficulty: 'intermediate', front: '重新認識不確定', back: '也許你一直在逃避不確定，但它正是生命邀請你學習信任的課堂。你準備好重新認識它了嗎？', emoji: '❓' },
            { id: 3, category: 'awareness', difficulty: 'intermediate', front: '困境中的選擇', back: '迷霧中的你，是選擇恐慌地亂闖，還是靜下來感受內心的指引？每個選擇都在塑造更完整的你。', emoji: '🔀' },
            { id: 4, category: 'awareness', difficulty: 'beginner', front: '迷失的智慧', back: '每次迷失，都是生命給你重新認識自己的機會。承認迷失，接受不知道，就是成長的開始。', emoji: '🧭' },
            { id: 5, category: 'awareness', difficulty: 'advanced', front: '安然前行', back: '當你學會在迷霧中安然前行，不再急於找尋出口，你就成為了更完整、更有智慧的自己。', emoji: '🚶‍♀️' },
            { id: 6, category: 'awareness', difficulty: 'intermediate', front: '放下的勇氣', back: '你正站在新舊之間的門檻上，害怕放下熟悉的自己嗎？也許放下，正是為了迎接更真實的你。', emoji: '🕊️' },
            { id: 7, category: 'awareness', difficulty: 'intermediate', front: '混沌中的智慧', back: '轉變期的混亂讓你不安，但問問自己：這份不安想教會我什麼？混沌往往孕育著最大的可能性。', emoji: '🌀' },
            { id: 8, category: 'awareness', difficulty: 'intermediate', front: '選擇的時刻', back: '面對轉變，你是選擇抗拒回到舊模式，還是勇敢擁抱未知？每個選擇都在重新定義你是誰。', emoji: '⚖️' },
            { id: 9, category: 'awareness', difficulty: 'advanced', front: '蛻變的過程', back: '就像蝴蝶破蛹而出，你也在經歷必要的蛻變。承認這個過程的艱難，同時相信即將到來的美麗。', emoji: '🦋' },
            { id: 10, category: 'awareness', difficulty: 'advanced', front: '重新誕生', back: '當你願意讓舊的自己在某種意義上死去，新的你就能重新誕生。你準備好迎接這個新的自己了嗎？', emoji: '🌅' },
            { id: 11, category: 'awareness', difficulty: 'beginner', front: '挑戰的意義', back: '當你遇到困難時，問問自己：這個挑戰想教給我什麼？每個障礙都是旅程中重要的學習章節。', emoji: '⛰️' },
            { id: 12, category: 'awareness', difficulty: 'intermediate', front: '迷路的智慧', back: '那些看似走偏的路，往往帶你走向更真實的自己。有時候迷路，正是為了讓你找到真正的方向。', emoji: '🛤️' },
            { id: 13, category: 'awareness', difficulty: 'intermediate', front: '重新定義目的地', back: '你一直急著到達終點，卻忽略了路上的風景嗎？問問自己：旅程本身是否就是你要尋找的目的地？', emoji: '🎯' },
            { id: 14, category: 'awareness', difficulty: 'advanced', front: '勇敢的放下', back: '當舊的模式不再服務你時，你是緊抓不放，還是勇敢地讓它死去？有時放手，正是為了讓新生命誕生。', emoji: '🤲' },
            { id: 15, category: 'awareness', difficulty: 'advanced', front: '結束的智慧', back: '每個結束都是新開始的種子。問問自己：這個看似痛苦的結束，正在為什麼樣的新生命創造空間？', emoji: '🌱' },
            { id: 16, category: 'awareness', difficulty: 'beginner', front: '允許自己開始', back: '你是否一直等待完美的時機？問問自己：我為什麼不允許自己從這裡開始？即使準備不足，也可以踏出第一步。', emoji: '🚀' },
            { id: 17, category: 'awareness', difficulty: 'intermediate', front: '不開始的代價', back: '當你害怕踏出第一步時，問問自己：如果我不開始，會錯過什麼？有時候不行動的風險，比行動更大。', emoji: '⏰' },
            { id: 18, category: 'awareness', difficulty: 'intermediate', front: '不能再假裝', back: '那道突然閃過的光，讓你瞬間想起了什麼？問問自己：我還能繼續假裝沒看見、沒感覺到嗎？', emoji: '💡' },
            { id: 19, category: 'awareness', difficulty: 'advanced', front: '已經準備好', back: '當某個瞬間震動了你的心，那代表你內心其實早已準備好。問問自己：我在等待什麼樣的允許？', emoji: '✨' },
            { id: 20, category: 'awareness', difficulty: 'advanced', front: '是時候了', back: '當你感到「不能再回頭」的時刻，那就是命運在推你一把。你準備好承認：是時候了嗎？', emoji: '⏳' },

            // 關係映照類（15組）
            { id: 21, category: 'relationships', difficulty: 'beginner', front: '情緒的反照', back: '當你對某人產生強烈反應時，停下來問問自己：我在他身上看見了什麼？也許答案就在你心裡。', emoji: '🪞' },
            { id: 22, category: 'relationships', difficulty: 'intermediate', front: '關係中的映照', back: '你最在意的那個人的缺點，是否也存在於你身上？承認這個可能性，就是自我認識的開始。', emoji: '👥' },
            { id: 23, category: 'relationships', difficulty: 'intermediate', front: '收回投射的勇氣', back: '與其一直指責他人，不如問問自己：我把什麼投射在他身上了？收回投射，就是收回自己的力量。', emoji: '🎭' },
            { id: 24, category: 'relationships', difficulty: 'advanced', front: '陰影的禮物', back: '你最討厭的特質，往往是你最不願面對的自己。勇敢地看見它，就是整合陰影的第一步。', emoji: '🌑' },
            { id: 25, category: 'relationships', difficulty: 'advanced', front: '真實的映照', back: '當你不再需要他人來證明自己時，你就能真正看見他們。這時的關係，才是最真實的映照。', emoji: '💎' },
            { id: 26, category: 'relationships', difficulty: 'beginner', front: '內在的提醒', back: '當某個人讓你反應很大時，問問自己：這會不會是我內在的某一部分，也在提醒我自己？', emoji: '🔔' },
            { id: 27, category: 'relationships', difficulty: 'intermediate', front: '批判中的自我發現', back: '你最批判他人的特質，往往就是你最不願面對的自己。問問自己：我在批判什麼？答案可能令你驚訝。', emoji: '🔍' },
            { id: 28, category: 'relationships', difficulty: 'intermediate', front: '被觸動的真相', back: '每一次被觸動，都是靈魂想要整合的信號。問問自己：這個情緒反應，想帶我看見哪個被遺忘的部分？', emoji: '💫' },
            { id: 29, category: 'relationships', difficulty: 'advanced', front: '多版本的自己', back: '你不是只有一個樣子的人。快樂的、害怕的、強硬的、溫柔的，都是你。你願意承認自己有那麼多面向嗎？', emoji: '🎨' },
            { id: 30, category: 'relationships', difficulty: 'advanced', front: '在他人中找自己', back: '每一次相遇都是靈魂的鏡子。與其評判他人，不如問問自己：這面鏡子想告訴我關於自己的什麼線索？', emoji: '🔮' },
            { id: 31, category: 'relationships', difficulty: 'intermediate', front: '面對隱藏的自己', back: '那些你最不想承認的特質，正是你最需要面對的自己。逃避讓陰影更強大，接納卻能釋放被困的力量。', emoji: '🗝️' },
            { id: 32, category: 'relationships', difficulty: 'advanced', front: '陰影中的寶藏', back: '越害怕的陰影，越可能藏著珍貴的寶藏。那些被你壓抑的特質，或許正是你最需要的力量。', emoji: '💰' },
            { id: 33, category: 'relationships', difficulty: 'advanced', front: '整合的勇氣', back: '與其繼續裝作完美，不如勇敢地擁抱不完美的自己。真正的力量來自於接納全部的你。', emoji: '🤗' },
            { id: 34, category: 'relationships', difficulty: 'advanced', front: '完整的自我', back: '當你不再需要隱藏任何部分的自己時，你就體驗到了真正的完整。這就是陰影整合的恩典。', emoji: '🌟' },
            { id: 35, category: 'relationships', difficulty: 'intermediate', front: '受傷的智慧', back: '你的傷痛經驗是否讓你對他人的痛苦有更深的理解？問問自己：我的傷痛如何成為療癒他人的力量？', emoji: '💝' },

            // 自我發現類（15組）
            { id: 36, category: 'self-discovery', difficulty: 'beginner', front: '發現真正的禮物', back: '你總是羨慕別人的才能，卻忽略了自己的天賦嗎？停下來問問自己：什麼讓我感到最有活力和真實？', emoji: '🎁' },
            { id: 37, category: 'self-discovery', difficulty: 'beginner', front: '平凡中的不凡', back: '真正的天賦常在日常小事中顯現，而非驚天動地的特殊能力。仔細觀察，你獨特的表達方式是什麼？', emoji: '✨' },
            { id: 38, category: 'self-discovery', difficulty: 'intermediate', front: '獨特性的價值', back: '你不必成為另一個人才有價值，就像樹不必長成另一棵樹的模樣。你的獨特性本身就是珍貴的禮物。', emoji: '🌳' },
            { id: 39, category: 'self-discovery', difficulty: 'intermediate', front: '天賦與貢獻', back: '問問自己：如何將你的天賦用於服務他人？當個人才能與社會貢獻結合時，你就找到了生命的意義。', emoji: '🌍' },
            { id: 40, category: 'self-discovery', difficulty: 'advanced', front: '活出真實的自己', back: '當你不再模仿他人，開始活出真實的自己時，你的天賦就自然展現。這是你給世界最珍貴的禮物。', emoji: '🦄' },
            { id: 41, category: 'self-discovery', difficulty: 'intermediate', front: '旅者的智慧', back: '你既是旅者，也是旅途。你走過的每一步，都在塑造更完整的自己。珍惜這個成為的過程。', emoji: '🗺️' },
            { id: 42, category: 'self-discovery', difficulty: 'advanced', front: '當下的抵達', back: '停下腳步問問自己：如果旅程本身就是目的地，那麼此刻的我，是否已經抵達了某個美好的地方？', emoji: '🏡' },
            { id: 43, category: 'self-discovery', difficulty: 'intermediate', front: '包容內在矛盾', back: '你是否總為內在的矛盾而困擾？問問自己：如何創造足夠大的容器，讓所有部分都找到自己的位置？', emoji: '🫙' },
            { id: 44, category: 'self-discovery', difficulty: 'advanced', front: '和諧的多樣性', back: '真正的整合不是消除差異，而是讓不同面向和平共處。你的勇敢與恐懼，都是完整自我的一部分。', emoji: '🌈' },
            { id: 45, category: 'self-discovery', difficulty: 'intermediate', front: '內在對話的智慧', back: '當內在聲音產生衝突時，不要急著選邊站。問問它們：你們想要什麼？如何找到雙贏的解決方案？', emoji: '💭' },
            { id: 46, category: 'self-discovery', difficulty: 'advanced', front: '生態系統的啟示', back: '就像森林中每個生物都有其角色，你的每個面向也都有存在的價值。整合是協調，而非排除。', emoji: '🌲' },
            { id: 47, category: 'self-discovery', difficulty: 'advanced', front: '完整的自己', back: '當你不再被內在矛盾分裂，而是體驗到統一的多樣性時，你就發現了真正的力量與平靜。', emoji: '🕉️' },
            { id: 48, category: 'self-discovery', difficulty: 'intermediate', front: '超越非此即彼', back: '你是否總是陷入非黑即白的思維？問問自己：在這個對立中，是否存在著第三條道路？', emoji: '🌓' },
            { id: 49, category: 'self-discovery', difficulty: 'advanced', front: '對立面的智慧', back: '當你想要擺脫脆弱時，問問自己：這份脆弱中是否藏著特殊的力量？對立面往往相互滋養。', emoji: '☯️' },
            { id: 50, category: 'self-discovery', difficulty: 'advanced', front: '陰陽的舞蹈', back: '真正的完整不是消除所有負面，而是讓光明與黑暗在你內在和諧共舞。你準備好擁抱全部的自己嗎？', emoji: '💃' },

            // 生活實踐類 (51-65)
            { id: 51, category: 'practice', difficulty: 'beginner', front: '心底的聲音', back: '在夜深人靜時，什麼願望會在你心中小小地跳動？那個你自己都差點忘了的深層渴望是什麼？', emoji: '💫' },
            { id: 52, category: 'practice', difficulty: 'beginner', front: '不敢說出口的真心', back: '你最近想要卻沒說出口的是什麼？問問自己：這個願望背後，我真正渴望的是什麼樣的生活？', emoji: '💭' },
            { id: 53, category: 'practice', difficulty: 'intermediate', front: '對宇宙的邀請', back: '願望不是要求，而是向宇宙發出的邀請。當你真誠地說出你的願望時，你同時也在召喚生命的可能性。', emoji: '🌌' },
            { id: 54, category: 'practice', difficulty: 'intermediate', front: '脆弱的勇氣', back: '說出願望需要勇氣，因為它讓我們變得脆弱。但問問自己：如果我不說出來，它會永遠只是遺憾嗎？', emoji: '💝' },
            { id: 55, category: 'practice', difficulty: 'beginner', front: '停下的勇氣', back: '你是否一直在走，害怕停下會感受到內心的混亂？問問自己：我敢承認自己累了，也需要被照顧嗎？', emoji: '🛑' },
            { id: 56, category: 'practice', difficulty: 'intermediate', front: '真正的對齊', back: '有時候停下，才是真正的對齊。當外在的節奏與內在不同步時，你願意選擇跟隨自己的節奏嗎？', emoji: '🎯' },
            { id: 57, category: 'practice', difficulty: 'intermediate', front: '空白的力量', back: '在什麼都不做的空白中，往往會浮現最真實的聲音。你願意給自己一段無需回應的安靜時間嗎？', emoji: '⚪' },
            { id: 58, category: 'practice', difficulty: 'advanced', front: '內在的懷抱', back: '就像躲進大樹的懷抱，你的內在也有一個安全的空間。當你感到疲憊時，你知道如何回到那裡嗎？', emoji: '🌳' },
            { id: 59, category: 'practice', difficulty: 'advanced', front: '重新定義進步', back: '進步不一定是往前走，有時是學會停下來照顧自己。暫停不是弱點，而是深深的自我關愛。', emoji: '🔄' },
            { id: 60, category: 'practice', difficulty: 'intermediate', front: '在混亂中重生', back: '當你覺得自己像是壞掉了，說話卡住，不想走路時，問問自己：我是不是正在蛻變中？', emoji: '🦋' },
            { id: 61, category: 'practice', difficulty: 'advanced', front: '允許瓦解', back: '真正的轉化需要先瓦解舊的自己。你願意允許那些不再適合的部分慢慢溶解嗎？這不是失去，而是重生。', emoji: '🌊' },
            { id: 62, category: 'practice', difficulty: 'advanced', front: '不再偽裝的勇氣', back: '也許轉化不是變得更強，而是允許自己不再偽裝。問問自己：我還在努力成為誰期待的樣子嗎？', emoji: '🎭' },
            { id: 63, category: 'practice', difficulty: 'advanced', front: '擁抱尚未完成', back: '你不需要急著變好，只需要在破碎中讓光發芽。問問自己：我能否擁抱所有尚未完成的我？', emoji: '🌱' },
            { id: 64, category: 'practice', difficulty: 'advanced', front: '新的本質', back: '當你發現自己不是原來的那個你了，這不是迷失，而是找到了更真實的自己。你準備好迎接新的本質嗎？', emoji: '✨' },
            { id: 65, category: 'practice', difficulty: 'intermediate', front: '空下來的真實', back: '當你什麼都不做時，是否擔心自己變得不重要？問問自己：空下來的我，是否反而更真實了？', emoji: '🕊️' },

            // 存在確認類 (66-80)
            { id: 66, category: 'existence', difficulty: 'beginner', front: '不再縮小自己', back: '你是否總是試著變得像誰、說得更乖，好讓別人喜歡？問問自己：我準備好停止縮小自己了嗎？', emoji: '🌟' },
            { id: 67, category: 'existence', difficulty: 'intermediate', front: '夠了的存在', back: '當你不再追問「我該怎麼變好」，而是問「我是誰」時，會聽到什麼聲音？也許答案就是：我就是我，就夠了。', emoji: '💎' },
            { id: 68, category: 'existence', difficulty: 'intermediate', front: '站在自己的形狀裡', back: '你可以不用再成為誰了，只要做你，就是很夠了。問問自己：我敢站在自己真實的形狀裡嗎？', emoji: '🏛️' },
            { id: 69, category: 'existence', difficulty: 'advanced', front: '身份的回歸', back: '經過所有的疑惑與蛻變，你準備好與靈魂的名字重新對上號了嗎？那個最初、最本質的光，就是你。', emoji: '🔮' },
            { id: 70, category: 'existence', difficulty: 'advanced', front: '存在的宣言', back: '我是，我在，我值得如此存在。當你能穩定地說出這句話時，你就回到了真我的核心力量。', emoji: '👑' },
            { id: 71, category: 'existence', difficulty: 'intermediate', front: '不再逃離', back: '你是否一直在逃，逃離某個不夠好的自己？問問自己：我準備好不再逃離，允許自己就是這樣了嗎？', emoji: '🏠' },
            { id: 72, category: 'existence', difficulty: 'advanced', front: '與自己和解', back: '家不是一個地點，而是與自己和解的狀態。當你不再責怪曾經的自己時，你就找到回家的路了。', emoji: '🤝' },
            { id: 73, category: 'existence', difficulty: 'advanced', front: '接回每個部分', back: '那些曾被你排斥、否定、逃避的部分，都在等你說：「謝謝你，我回來了。」你準備好接它們回家嗎？', emoji: '🫂' },
            { id: 74, category: 'existence', difficulty: 'advanced', front: '歸屬於自己', back: '最深的歸屬不是被別人接納，而是允許自己成為自己。當你找到這種歸屬感時，你就回到家了。', emoji: '🌍' },
            { id: 75, category: 'existence', difficulty: 'advanced', front: '一直都在', back: '你沒有找到家，而是發現家一直在你身體裡。當你停止尋找外在的家時，內在的家就為你點亮了燈。', emoji: '🏡' },
            { id: 76, category: 'existence', difficulty: 'intermediate', front: '內在的召喚', back: '當你聽見心裡安靜地說「這就是我想為世界留下的痕跡」時，那就是你的靈魂在召喚你。你聽見了嗎？', emoji: '📞' },
            { id: 77, category: 'existence', difficulty: 'intermediate', front: '不是責任而是渴望', back: '這不是你應該做的事，而是你靈魂渴望實現的事。問問自己：什麼讓我的內在燃燒起願意的火焰？', emoji: '🔥' },
            { id: 78, category: 'existence', difficulty: 'advanced', front: '從熱情中發現', back: '你的靈魂任務常常藏在你的熱情、傷痛、天賦與渴望中。回顧你最深的痛與喜，它們想告訴你什麼？', emoji: '🗝️' },
            { id: 79, category: 'existence', difficulty: 'advanced', front: '超越自己的願望', back: '你準備好不再只是為了自己而生活了嗎？當你的光找到方向時，你就踏上了靈魂任務的道路。', emoji: '🌅' },
            { id: 80, category: 'existence', difficulty: 'advanced', front: '說願意的時刻', back: '也許你的靈魂聲音很小，但它一直都在。當你聽見它在說「你準備好了」時，你敢回答「我願意」嗎？', emoji: '💍' }
        ];

        let currentTheme = 'ocean';
        let drawnCards = [];
        let allFlipped = false;

        // 獲取類別名稱
        function getCategoryName(category) {
            const categoryLabels = {
                'awareness': '困境覺察',
                'relationships': '關係映照',
                'self-discovery': '自我發現',
                'practice': '生活實踐',
                'existence': '存在確認'
            };
            return categoryLabels[category] || category;
        }

        // 抽取卡片
        function drawCards() {
            const drawMode = document.getElementById('drawModeSelect').value;
            let numberOfCards;

            switch (drawMode) {
                case 'single':
                    numberOfCards = 1;
                    break;
                case 'three':
                    numberOfCards = 3;
                    break;
                case 'five':
                    numberOfCards = 5;
                    break;
                default:
                    numberOfCards = 1;
            }

            // 隨機選取卡片
            const shuffled = [...cardDatabase].sort(() => 0.5 - Math.random());
            drawnCards = shuffled.slice(0, numberOfCards);
            allFlipped = false;

            // 顯示抽取的卡片
            displayDrawnCards();
            showReadingGuide(drawMode);

            // 顯示抽卡區域
            document.getElementById('drawnCardsSection').classList.remove('hidden');

            // 平滑滾動到卡片區域
            setTimeout(() => {
                document.getElementById('drawnCardsSection').scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }, 100);
        }

        // 顯示抽取的卡片
        function displayDrawnCards() {
            const container = document.getElementById('drawnCardsContainer');
            const drawMode = document.getElementById('drawModeSelect').value;

            // 設定網格佈局
            let gridClass = '';
            if (drawMode === 'single') {
                gridClass = 'grid-cols-1 justify-items-center max-w-sm mx-auto';
            } else if (drawMode === 'three') {
                gridClass = 'grid-cols-1 md:grid-cols-3 max-w-5xl mx-auto';
            } else if (drawMode === 'five') {
                gridClass = 'grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 max-w-7xl mx-auto';
            }

            container.className = `grid gap-8 ${gridClass}`;
            container.innerHTML = '';

            drawnCards.forEach((card, index) => {
                const cardElement = createDrawnCardElement(card, index);
                container.appendChild(cardElement);
            });
        }

        // 創建抽取卡片元素
        function createDrawnCardElement(card, index) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'card-flip cursor-pointer';
            cardDiv.id = `drawn-card-${index}`;
            cardDiv.onclick = () => flipCard(cardDiv);

            const difficultyLabels = {
                'beginner': '初探 🌱',
                'intermediate': '深入 🌿',
                'advanced': '深層 🌳'
            };

            // 五向展開的位置標籤
            const fiveCardPositions = ['A：靈性觸發', 'B：內在智慧', 'C：命運結果', '整合新視野', '靈性行動'];
            const threeCardPositions = ['過去/靈魂根源', '現在/靈性核心', '未來/神聖指引'];

            let positionLabel = '';
            const drawMode = document.getElementById('drawModeSelect').value;
            if (drawMode === 'five' && index < 5) {
                positionLabel = `<div class="position-label">${fiveCardPositions[index]}</div>`;
            } else if (drawMode === 'three' && index < 3) {
                positionLabel = `<div class="position-label">${threeCardPositions[index]}</div>`;
            }

            cardDiv.innerHTML = `
                <div class="card-inner">
                    <div class="card-front">
                        <div class="card-content">
<br><br><br><br><br>
                            <h3 class="text-xl font-bold text-gray-800 mb-4">療癒字卡</h3>
                            <p class="text-sm text-gray-600 mb-1" style="color:White;">點擊翻轉查看訊息</p>
                        </div>
                    </div>
                    <div class="card-back">
                        ${positionLabel}
                        <div class="card-content">
                            <div class="emoji mt-2">${card.emoji}</div>
                            <h3 class="text-lg font-bold mb-4 text-center healing-text">${card.front}</h3>
                            <p class="text-sm leading-relaxed text-center healing-text mb-4 flex-1 mr-4 ml-4">${card.back}</p>
                            <div class="mt-auto text-center" style="margin-top: auto; transform: translateY(-25px);">
                                <span class="inline-block px-3 py-1 bg-white/20 rounded-full text-xs">
                                    ${getCategoryName(card.category)} · No.${card.id}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            return cardDiv;
        }

        // 顯示解讀指引
        function showReadingGuide(drawMode) {
            const guideText = document.getElementById('guideText');
            const quickGuide = document.getElementById('quickReadingGuide');
            let guideHTML = '';
            let quickGuideHTML = '';

            switch (drawMode) {
                case 'single':
                    guideHTML = `
                        <p class="text-sm mb-2" style="color: #2c2838;">這張卡片是宇宙此刻賜予你的神聖訊息。靜下心來，感受靈性想要傳達給你的智慧。</p>
                        <p class="text-sm" style="color: #2c2838;">💫 問問自己：如何與我當前的靈性旅程產生共鳴？</p>
                    `;
                    
                    quickGuideHTML = `
                        <h4 class="font-semibold mb-3 text-center" style="color: #2c2838;">✨ 三層快速解讀</h4>
                        <div class="quick-guide-item">
                            <div class="flex items-center mb-2">
                                <span class="text-lg mr-2">👁️</span>
                                <strong style="color: #2c2838;">看見：</strong>
                            </div>
                            <p class="text-sm" style="color: #2c2838;">這張卡片帶來了什麼直覺感受？哪個詞句最觸動你？</p>
                        </div>
                        <div class="quick-guide-item">
                            <div class="flex items-center mb-2">
                                <span class="text-lg mr-2">🔗</span>
                                <strong style="color: #2c2838;">連結：</strong>
                            </div>
                            <p class="text-sm" style="color: #2c2838;">這個訊息與你當前的情境、情緒有什麼呼應？</p>
                        </div>
                        <div class="quick-guide-item">
                            <div class="flex items-center mb-2">
                                <span class="text-lg mr-2">🛤️</span>
                                <strong style="color: #2c2838;">前行：</strong>
                            </div>
                            <p class="text-sm" style="color: #2c2838;">你可以做什麼小小的選擇，讓這個訊息開始變成生活的改變？</p>
                        </div>
                        <div class="quick-guide-item" style="background: rgba(201, 169, 110, 0.20); border-left: 4px solid #c9a96e;">
                            <div class="font-medium mb-1" style="color: #2c2838;">📝 快速書寫</div>
                            <p class="text-sm" style="color: #2c2838;">完成這個句子：「這張卡讓我想到...」</p>
                        </div>
                    `;
                    break;
                case 'three':
                    guideHTML = `
                        <div class="grid md:grid-cols-3 gap-4 text-sm mb-4">
                            <div style="background: rgba(201, 169, 110, 0.20); border: 1px solid rgba(201, 169, 110, 0.40); border-radius: 8px; padding: 12px;">
                                <div class="font-medium mb-1" style="color: #2c2838;">🌅 過去/靈魂根源</div>
                                <div class="text-xs" style="color: #2c2838;">影響當前靈性狀況的過去經驗或靈魂模式</div>
                            </div>
                            <div style="background: rgba(201, 169, 110, 0.20); border: 1px solid rgba(201, 169, 110, 0.40); border-radius: 8px; padding: 12px;">
                                <div class="font-medium mb-1" style="color: #2c2838;">⭐ 現在/靈性核心</div>
                                <div class="text-xs" style="color: #2c2838;">當前最需要關注的靈性核心議題</div>
                            </div>
                            <div style="background: rgba(201, 169, 110, 0.20); border: 1px solid rgba(201, 169, 110, 0.40); border-radius: 8px; padding: 12px;">
                                <div class="font-medium mb-1" style="color: #2c2838;">🌟 未來/神聖指引</div>
                                <div class="text-xs" style="color: #2c2838;">靈性前進方向的建議或即將展現的神聖可能性</div>
                            </div>
                        </div>
                        <p class="text-sm" style="color: #2c2838;">💫 觀察三張卡片之間的靈性關聯性，它們共同訴說著你靈魂故事的一個神聖章節。</p>
                    `;

                    quickGuideHTML = `
                        <h4 class="font-semibold mb-3 text-center" style="color: #2c2838;">🔗 三重整合探索</h4>
                        <div class="quick-guide-item">
                            <strong style="color: #2c2838;">🎭 看見模式：</strong>
                            <span class="text-sm" style="color: #2c2838;">三張卡片揭示了什麼重複的生命模式或主題？</span>
                        </div>
                        <div class="quick-guide-item">
                            <strong style="color: #2c2838;">🌊 連結流動：</strong>
                            <span class="text-sm" style="color: #2c2838;">從過去到現在到未來，能量是如何流動和轉化的？</span>
                        </div>
                        <div class="quick-guide-item">
                            <strong style="color: #2c2838;">⚡ 行動橋樑：</strong>
                            <span class="text-sm" style="color: #2c2838;">如何用一個行動連接這三個時空，創造療癒與轉化？</span>
                        </div>
                        <div class="quick-guide-item" style="background: rgba(201, 169, 110, 0.20); border-left: 4px solid #c9a96e;">
                            <div class="font-medium mb-1" style="color: #2c2838;">📝 整合書寫</div>
                            <p class="text-sm" style="color: #2c2838;">寫下：「我的靈魂正在從___走向___，而現在我需要___」</p>
                        </div>
                    `;
                    break;
                case 'five':
                    guideHTML = `
                        <div class="grid md:grid-cols-5 gap-3 text-xs mb-4">
                            <div style="background: rgba(201, 169, 110, 0.20); border: 1px solid rgba(201, 169, 110, 0.40); border-radius: 8px; padding: 12px;">
                                <div class="font-medium mb-1" style="color: #2c2838;">A：靈性觸發</div>
                                <div style="color: #2c2838;">近期觸動你靈性的事件或外在刺激</div>
                            </div>
                            <div style="background: rgba(201, 169, 110, 0.20); border: 1px solid rgba(201, 169, 110, 0.40); border-radius: 8px; padding: 12px;">
                                <div class="font-medium mb-1" style="color: #2c2838;">B：內在智慧</div>
                                <div style="color: #2c2838;">你對事件的靈性詮釋與深層智慧</div>
                            </div>
                            <div style="background: rgba(201, 169, 110, 0.20); border: 1px solid rgba(201, 169, 110, 0.40); border-radius: 8px; padding: 12px;">
                                <div class="font-medium mb-1" style="color: #2c2838;">C：命運結果</div>
                                <div style="color: #2c2838;">由靈性智慧產生的情緒、行為或內在結果</div>
                            </div>
                            <div style="background: rgba(201, 169, 110, 0.20); border: 1px solid rgba(201, 169, 110, 0.40); border-radius: 8px; padding: 12px;">
                                <div class="font-medium mb-1" style="color: #2c2838;">整合新視野</div>
                                <div style="color: #2c2838;">如果你願意開啟新的靈性視野，你會怎麼重新看待它？</div>
                            </div>
                            <div style="background: rgba(201, 169, 110, 0.20); border: 1px solid rgba(201, 169, 110, 0.40); border-radius: 8px; padding: 12px;">
                                <div class="font-medium mb-1" style="color: #2c2838;">靈性行動</div>
                                <div style="color: #2c2838;">基於新的靈性理解，能採取的下一個神聖行動</div>
                            </div>
                        </div>
                        <p class="text-sm" style="color: #2c2838;">💫 這個展開方式協助你用一套靈性路徑，從事件經驗走向靈性轉化與前行。</p>
                    `;

                    quickGuideHTML = `
                        <h4 class="font-semibold mb-3 text-center" style="color: #2c2838;">⚡ 五步轉化流程</h4>
                        <div class="quick-guide-item">
                            <strong style="color: #2c2838;">🔍 模式識別：</strong>
                            <span class="text-sm" style="color: #2c2838;">A→B→C 揭示了什麼慣性反應模式？這個模式服務我嗎？</span>
                        </div>
                        <div class="quick-guide-item">
                            <strong style="color: #2c2838;">💡 視野轉換：</strong>
                            <span class="text-sm" style="color: #2c2838;">D卡邀請什麼新的可能性？如果採用這個視野，會如何改變我的感受？</span>
                        </div>
                        <div class="quick-guide-item">
                            <strong style="color: #2c2838;">🚀 實踐整合：</strong>
                            <span class="text-sm" style="color: #2c2838;">E卡的行動如何幫助我從舊模式轉向新可能？我準備好踏出這一步嗎？</span>
                        </div>
                        <div class="quick-guide-item" style="background: rgba(201, 169, 110, 0.20); border-left: 4px solid #c9a96e;">
                            <div class="font-medium mb-1" style="color: #2c2838;">🎯 轉化宣言</div>
                            <p class="text-sm" style="color: #2c2838;">完成：「我選擇從___（舊模式）轉向___（新視野），透過___（行動）」</p>
                        </div>
                    `;
                    break;
            }

            guideText.innerHTML = guideHTML;
            quickGuide.innerHTML = quickGuideHTML;
        }

        // 翻轉單張卡片
        function flipCard(cardElement) {
            cardElement.classList.toggle('flipped');
        }

        // 翻轉所有卡片
        function flipAllCards() {
            drawnCards.forEach((card, index) => {
                const cardElement = document.getElementById(`drawn-card-${index}`);
                if (cardElement) {
                    if (allFlipped) {
                        cardElement.classList.remove('flipped');
                    } else {
                        cardElement.classList.add('flipped');
                    }
                }
            });
            allFlipped = !allFlipped;
        }

        // 重新開始
        function resetDraw() {
            drawnCards = [];
            allFlipped = false;
            document.getElementById('drawnCardsSection').classList.add('hidden');
        }

        // 顯示卡片模態框
        function showCardModal(cardId) {
            const card = cardDatabase.find(c => c.id === cardId);
            const modal = document.getElementById('cardModal');
            const modalContent = document.getElementById('modalContent');

            const difficultyLabels = {
                'beginner': '初探 🌱',
                'intermediate': '深入 🌿',
                'advanced': '深層 🌳'
            };

            const categoryLabels = {
                'awareness': '困境覺察',
                'relationships': '關係映照',
                'self-discovery': '自我發現',
                'practice': '生活實踐',
                'existence': '存在確認'
            };

            modalContent.innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-4">${card.emoji}</div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">${card.front}</h2>
                    <div class="flex justify-center gap-2 mb-4">
                        <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">${categoryLabels[card.category]}</span>
                        <span class="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm">${difficultyLabels[card.difficulty]}</span>
                    </div>
                    <p class="text-gray-600 leading-relaxed mb-6">${card.back}</p>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-medium text-gray-800 mb-2">💡 探索提示</h3>
                        <p class="text-sm text-gray-600">找個安靜的地方，給自己10-15分鐘的時間，誠實地面對這個問題。可以寫下你的想法，或者只是靜靜思考。</p>
                    </div>
                </div>
            `;

            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // 關閉模態框
        function closeModal() {
            const modal = document.getElementById('cardModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // 切換使用方式提示
        function toggleUsageTips() {
            const tips = document.getElementById('usageTips');
            const btn = document.getElementById('usageTipsBtn');
            
            if (tips.style.display === 'none') {
                tips.style.display = 'block';
                btn.textContent = '📚 收起使用方式';
            } else {
                tips.style.display = 'none';
                btn.textContent = '📚 查看使用方式與日常實踐';
            }
        }

        // 切換詳細指引
        function toggleDetailedGuide() {
            const guide = document.getElementById('detailedGuide');
            const btn = document.getElementById('detailedGuideBtn');
            
            if (guide.style.display === 'none') {
                guide.style.display = 'block';
                btn.textContent = '✨ 收起深度指引';
                populateDetailedGuide();
            } else {
                guide.style.display = 'none';
                btn.textContent = '✨ 展開深度解讀指引';
            }
        }

        // 填充詳細指引內容
        function populateDetailedGuide() {
            const guide = document.getElementById('detailedGuide');
            const drawMode = document.getElementById('drawModeSelect').value;
            let content = '';

            switch (drawMode) {
                case 'single':
                    content = `
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="tip-category">
                                <h5 class="font-semibold mb-2" style="color: #2c2838;">🧘 冥想整合</h5>
                                <div class="text-sm space-y-1" style="color: #2c2838;">
                                    <p>• 閉眼深呼吸，重複卡片關鍵字</p>
                                    <p>• 感受身體的共鳴部位</p>
                                    <p>• 問內在：「這光想照亮什麼？」</p>
                                    <p>• 靜靜等待答案浮現</p>
                                </div>
                            </div>
                            <div class="tip-category">
                                <h5 class="font-semibold mb-2" style="color: #2c2838;">🌟 行動整合</h5>
                                <div class="text-sm space-y-1" style="color: #2c2838;">
                                    <p>• 今天：選擇一個回應行動</p>
                                    <p>• 本週：觀察生活中的對應</p>
                                    <p>• 長期：設定靈性實踐意圖</p>
                                    <p>• 分享：與信任的人分享領悟</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'three':
                    content = `
                        <div class="space-y-3">
                            <div class="tip-category">
                                <h5 class="font-semibold mb-2" style="color: #2c2838;">🕯️ 過去療癒儀式</h5>
                                <p class="text-sm" style="color: #2c2838;">為過去的經驗點一根蠟燭，說：「謝謝你教會我___，我釋放___」</p>
                            </div>
                            <div class="tip-category">
                                <h5 class="font-semibold mb-2" style="color: #2c2838;">💎 現在覺知練習</h5>
                                <p class="text-sm" style="color: #2c2838;">每天與核心議題對話5分鐘：「你今天想告訴我什麼？」</p>
                            </div>
                            <div class="tip-category">
                                <h5 class="font-semibold mb-2" style="color: #2c2838;">🌟 未來意圖設定</h5>
                                <p class="text-sm" style="color: #2c2838;">設定一個21天意圖：「我選擇朝向___，每天我將___」</p>
                            </div>
                        </div>
                    `;
                    break;
                case 'five':
                    content = `
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="tip-category">
                                <h5 class="font-semibold mb-2" style="color: #2c2838;">🔬 模式深探練習</h5>
                                <div class="text-sm space-y-1" style="color: #2c2838;">
                                    <p>• 這個模式最早何時開始？</p>
                                    <p>• 它曾經保護我什麼？</p>
                                    <p>• 現在它如何限制我？</p>
                                    <p>• 我準備好放下它嗎？</p>
                                </div>
                            </div>
                            <div class="tip-category">
                                <h5 class="font-semibold mb-2" style="color: #2c2838;">🌱 新模式建立</h5>
                                <div class="text-sm space-y-1" style="color: #2c2838;">
                                    <p>• 每天練習新視野5分鐘</p>
                                    <p>• 設定行動提醒</p>
                                    <p>• 記錄轉化過程</p>
                                    <p>• 慶祝每個小進步</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
            }

            guide.innerHTML = content;
        }

        // 更換主題
        function changeTheme(theme) {
            currentTheme = theme;
            document.body.className = `min-h-screen theme-${theme}`;
        }

        // ESC 鍵關閉模態框
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
    </script>
<!-- Footer -->
<footer class="footer">
<div class="footer-content">
<div class="text-center mb-6">
<p class="footer-text">
                    專業靈性諮詢與靈性指引服務 | 
                    致力於為您提供最準確的靈性指引 | 
                    讓每個靈魂都能找到內在的智慧之光
                </p>
</div>
<div class="footer-divider"></div>
<div class="footer-bottom">
<p>
                    © 2025 袖艷靈性指引工作室 (Xiuyan Mercy Studio). <br/>
<span class="text-sm opacity-70">
                        Professional Spiritual Consultation &amp; Mercy Services | 專業靈性諮詢與靈性指引服務
                    </span>
</p>
</div>
</div>
</footer>
</body>
</html>
